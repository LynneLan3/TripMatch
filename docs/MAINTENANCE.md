# 问卷系统维护文档

## 1. 系统架构

### 1.1 技术栈
- 前端：HTML5, CSS3, jQuery 3.6.4
- 后端：Python Flask
- 数据库：MySQL
- 部署：本地开发环境

### 1.2 目录结构
```
tripmatch2/
├── app.py              # 后端主程序
├── index.html          # 首页
├── questionnaire.html  # 问卷页面
├── .env               # 环境变量配置
└── docs/              # 项目文档
```

## 2. 环境配置

### 2.1 开发环境要求
- Python 3.8+
- MySQL 8.0+
- Node.js 14+（可选，用于前端开发）

### 2.2 环境变量配置
必要的环境变量（.env文件）：
```
DB_HOST=localhost
DB_PORT=3306
DB_NAME=tripmatch
DB_USER=your_username
DB_PASSWORD=your_password
```

## 3. 部署指南

### 3.1 初始化步骤
1. 克隆代码库
2. 创建虚拟环境
3. 安装依赖
4. 配置环境变量
5. 初始化数据库
6. 启动服务器

### 3.2 更新部署
1. 拉取最新代码
2. 更新依赖
3. 执行数据库迁移
4. 重启服务

## 4. 日常维护

### 4.1 数据库维护
- 定期备份数据库
- 优化数据库性能
- 清理无用数据
- 监控数据库大小

### 4.2 性能监控
- 监控服务器CPU使用率
- 监控内存使用情况
- 监控数据库连接数
- 监控API响应时间

### 4.3 安全维护
- 定期更新依赖包
- 检查安全漏洞
- 审查访问日志
- 更新安全配置

## 5. 故障处理

### 5.1 常见问题
1. 数据库连接失败
   - 检查数据库服务状态
   - 验证连接配置
   - 检查网络连接

2. API响应超时
   - 检查服务器负载
   - 优化数据库查询
   - 增加服务器资源

3. 前端页面异常
   - 清除浏览器缓存
   - 检查JavaScript错误
   - 验证API响应

### 5.2 应急预案
1. 服务器宕机
   - 启动备用服务器
   - 恢复数据备份
   - 通知相关人员

2. 数据异常
   - 停止相关服务
   - 恢复数据备份
   - 排查原因

## 6. 监控告警

### 6.1 监控指标
- 服务器状态
- API响应时间
- 数据库性能
- 错误日志

### 6.2 告警配置
- CPU使用率 > 80%
- 内存使用率 > 80%
- API响应时间 > 2s
- 错误日志数量突增

## 7. 更新记录

### 7.1 版本历史
- v1.0.0 (2024-12-09)
  - 初始版本发布
  - 基础问卷功能
  - 用户答题系统

### 7.2 计划更新
- 优化用户界面
- 添加数据分析功能
- 提升系统性能
- 增强安全性
